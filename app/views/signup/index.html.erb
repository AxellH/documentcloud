<%
  @title  = "Apply"
  @header = "Apply for a DocumentCloud account"
%>

<div id="content">


<%= form_for @verification_request, :url => {:controller => 'signup', :action => 'create_request'}, :html => { :class => 'form_v2' } do |f| %>

  <% if @verification_request.errors.any? %>
    <div class="alert error">
      <b>Sorry, we couldn’t create your request.</b> Please fix these and try again:
      <ul>
      <% @verification_request.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <p>Fill out this application and we’ll be in touch, usually within a day or two. For help with the process, email <a href="mailto:support@documentcloud.org">support@documentcloud.org</a>.</p>

  <fieldset class="fieldrow has3">
    <div class="fieldwrap required">
      <input id="requester_first_name" name="requester_first_name" type="text" class="field">
      <label class="fieldlabel" for="requester_first_name">
        <span class="fieldlabel_content" data-content="First name">First name</span>
      </label>
    </div>
    <div class="fieldwrap required">
      <input id="requester_last_name" name="requester_last_name" type="text" class="field">
      <label class="fieldlabel" for="requester_last_name">
        <span class="fieldlabel_content" data-content="Last name">Last name</span>
      </label>
    </div>
    <div class="fieldwrap required">
      <input id="requester_email" name="requester_email" type="email" class="field">
      <label class="fieldlabel" for="requester_email">
        <span class="fieldlabel_content" data-content="Email">Email</span>
      </label>
    </div>
  </fieldset>

  <fieldset class="fieldrow has3">
    <div class="fieldwrap required">
      <input id="organization_name" name="organization_name" type="text" class="field">
      <label class="fieldlabel" for="organization_name">
        <span class="fieldlabel_content" data-content="Organization">Organization</span>
      </label>
    </div>
    <div class="fieldwrap">
      <input id="organization_url" name="organization_url" type="url" class="field">
      <label class="fieldlabel" for="organization_url">
        <span class="fieldlabel_content" data-content="Organization URL">Organization URL</span>
      </label>
    </div>
    <div class="fieldwrap required">
      <%= f.country_select :country, {priority_countries: ['US'], prompt: ''}, :class => 'field' %>
      <label class="fieldlabel" for="country">
        <span class="fieldlabel_content" data-content="Country ⬇︎">Country &rarr;</span>
      </label>
    </div>
  </fieldset>

  <div id="journalism_toggler">
    Are you a <b>journalist</b> working with <b>primary source documents</b>?
    <a href="#">Yes</a>
    <a href="#">No / Unsure</a>
  </div>

  <fieldset id="journalism_fields">
    <fieldset class="radioset">
      <label class="radioset_label">We need someone – usually your editor or producer – to authorize us to post documents on your behalf.</label>
      <div class="radiowrap">
        <input id="approver_other" name="approver" value="other" type="radio">
        <label for="approver_other">
          Contact
          <input id="approver_first_name" name="approver_first_name" class="field_inline" type="text" placeholder="First name">
          <input id="approver_last_name" name="approver_last_name" class="field_inline" type="text" placeholder="Last name">
          at <input id="approver_email" name="approver_email" class="field_inline" type="email" placeholder="Email">
          for authorization
        </label>
      </div>
      <div class="radiowrap">
        <input id="approver_self" name="approver" value="self" type="radio">
        <label for="approver_self">
          I myself authorize you to post documents on my organization's behalf
        </label>
      </div>
    </fieldset>
  </fieldset>

  <fieldset id="nonjournalism_fields">
    <div class="fieldwrap">
      <input id="industry" name="industry" type="text" class="field">
      <label class="fieldlabel" for="industry">
        <span class="fieldlabel_content" data-content="What industry do you work in?">What industry do you work in?</span>
      </label>
    </div>
    <div class="fieldwrap">
      <textarea id="nonjournalism_requester_notes" name="nonjournalism_requester_notes" class="field"></textarea>
      <label class="fieldlabel" for="nonjournalism_requester_notes">
        <span class="fieldlabel_content" data-content="How would you like to use DocumentCloud?">How would you like to use DocumentCloud?</span>
      </label>
    </div>
  </fieldset>

  <div class="fieldwrap">
    <textarea id="requester_notes" name="requester_notes" class="field"></textarea>
    <label class="fieldlabel" for="requester_notes">
      <span class="fieldlabel_content" data-content="Additional comments">Additional comments (if you have any)</span>
    </label>
  </div>

  <fieldset class="checkset">
    <div class="checkwrap">
      <label for="agreed_to_terms">
        <input id="agreed_to_terms" name="agreed_to_terms" value="1" type="checkbox">
        I agree to the <a href="/terms" target="_blank">DocumentCloud terms of service</a>
      </label>
      <label for="marketing_optin">
        <input id="marketing_optin" name="marketing_optin" value="1" type="checkbox">
        Email me updates about new DocumentCloud features and services
      </label>
    </div>
  </fieldset>

  <div class="submitset">
    <button type="submit">Submit application</button>
  </div>

<% end %>

</div>